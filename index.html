<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Two Player Story Mode ğŸ’›</title>
  <meta name="description" content="An interactive anniversary journey â€“ Sarthak + Kavina" />
  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ’›</text></svg>" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>
<body>

<canvas id="particles-canvas" aria-hidden="true"></canvas>
<canvas id="confetti-canvas" aria-hidden="true"></canvas>

<!-- â•â•â•â•â•â•â•â•â•â• GAME HEADER â•â•â•â•â•â•â•â•â•â• -->
<header id="game-header" role="banner">
  <div class="progress-row">
    <span class="progress-label">Relationship Progress</span>
    <div class="progress-track" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
      <div class="progress-fill" id="progress-fill"></div>
    </div>
    <span class="progress-pct" id="progress-pct">0%</span>
  </div>
  <div class="status-row">
    <div class="status-pill active" id="status-health" title="Relationship Health">
      <span class="icon">â¤ï¸</span><span>Health</span>
      <span class="status-health-bar"><span class="status-health-fill" id="health-fill-bar" style="width:40%"></span></span>
    </div>
    <div class="status-pill" id="status-distance" title="Distance Meter">
      <span class="icon">â³</span><span>Distance</span>
      <span class="distance-bar"><span class="distance-fill" id="distance-fill-bar" style="width:0%"></span></span>
    </div>
    <div class="status-pill" id="status-coop" title="Co-Op Mode">
      <span class="icon">ğŸ </span><span>Co-Op</span>
      <span class="coop-bar"><span class="coop-fill" id="coop-fill-bar" style="width:0%"></span></span>
    </div>
    <span class="level-badge" id="level-badge">Level 1</span>
  </div>
</header>

<!-- â•â•â•â•â•â•â•â•â•â• ACHIEVEMENT POPUP â•â•â•â•â•â•â•â•â•â• -->
<div id="achievement-popup" role="alert" aria-live="polite">
  <div class="achievement-inner">
    <span class="achievement-icon" id="ach-icon">ğŸ†</span>
    <div class="achievement-text">
      <div class="achievement-label">Achievement Unlocked</div>
      <div class="achievement-name" id="ach-name">Title</div>
      <div class="achievement-desc" id="ach-desc">Description</div>
    </div>
    <button class="btn-secondary" style="padding:4px 10px;font-size:0.72rem;border-radius:6px;flex-shrink:0"
            onclick="closeAchievement()" aria-label="Close achievement">âœ•</button>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â• EASTER EGG POPUP â•â•â•â•â•â•â•â•â•â• -->
<div id="easter-egg-popup" role="dialog" aria-modal="true">
  <div class="easter-egg-box">
    <h3>ğŸ” You Found a Secret</h3>
    <div class="divider"></div>
    <p>"Some people arrive and everything changes. Not loudly â€” just quietly, completely.
      You didn't just unlock levels. You became the reason to keep playing.
      Thanks for showing up at that wedding."</p>
    <div style="margin-top:20px">
      <button class="btn-primary" onclick="closeEasterEgg()">Close Secret</button>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â• DEVELOPER'S NOTE POPUP (Ring Ã—3 Easter Egg) â•â•â•â•â•â•â•â•â•â• -->
<div id="developer-note-popup" role="dialog" aria-modal="true">
  <div class="developer-note-box">
    <h3>ğŸ–¥ï¸ Developer's Note</h3>
    <div class="divider"></div>
    <p>"This game only works because both players keep pressing Continue."</p>
    <div style="margin-top:20px">
      <button class="btn-primary" onclick="closeDeveloperNote()">Close</button>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â• MODAL â•â•â•â•â•â•â•â•â•â• -->
<div id="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="modal-title">
  <div class="modal-box">
    <button class="modal-close" onclick="closeModal()" aria-label="Close">âœ•</button>
    <div class="modal-tag">Memory Unlocked âœ¦</div>
    <h2 class="modal-title" id="modal-title">Title</h2>
    <p class="modal-body" id="modal-body"></p>
    <div class="modal-photo-grid" id="modal-photos" style="display:none"></div>
    <p id="modal-sub" style="font-size:0.8rem;color:var(--text-muted);margin-top:10px;font-style:italic;display:none"></p>
    <span class="modal-xp" id="modal-xp" style="display:none"></span>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â• SIDE QUEST FLOATING BUTTON â•â•â•â•â•â•â•â•â•â• -->
<button id="side-quest-trigger" class="side-quest-btn hidden" onclick="openSideQuestMenu()" aria-label="Open side quest">
  <span class="sq-btn-glow"></span>
  <span class="sq-btn-icon">ğŸ—ï¸</span>
  <span class="sq-btn-label">Side Quest</span>
</button>

<!-- â•â•â•â•â•â•â•â•â•â• SIDE QUEST OVERLAY â•â•â•â•â•â•â•â•â•â• -->
<div id="side-quest-overlay">
  <div class="side-quest-popin" id="side-quest-popin">
    <button class="modal-close" onclick="closeSideQuest()" aria-label="Close side quest">âœ•</button>
    <div id="sq-content"></div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â• GAME CONTENT â•â•â•â•â•â•â•â•â•â• -->
<main id="game-content">

  <!-- â•â•â• LANDING â•â•â• -->
  <section id="screen-landing" class="screen active">
    <div class="landing-bg-text" aria-hidden="true">â™¡</div>
    <div class="landing-inner">
      <div class="landing-tag">ğŸ® Interactive Story Mode</div>
      <h1 class="landing-title">Two Player<br><span>Story Mode</span></h1>
      <div class="landing-info">
        <div class="info-row"><span class="info-label">Players</span><span class="info-sep">â–¸</span><span class="info-value">Sarthak + Kavina</span></div>
        <div class="info-row"><span class="info-label">Mode</span><span class="info-sep">â–¸</span><span class="info-value">Co-Op</span></div>
        <div class="info-row"><span class="info-label">Difficulty</span><span class="info-sep">â–¸</span><span class="info-value">Long Distance â†’ Expert</span></div>
      </div>
      <button class="landing-btn" onclick="pressStart()"><span class="btn-icon">â–¶</span> Press Start</button>
      <div class="landing-hearts" aria-hidden="true"><span>ğŸ’›</span><span>âœ¦</span><span>â™¡</span><span>âœ¦</span><span>ğŸ’›</span></div>
    </div>
  </section>

  <!-- â•â•â• LEVEL 1 â€“ MEET CUTE â•â•â• -->
  <section id="screen-level1" class="screen">
    <div class="level-wrapper">
      <div class="level-header">
        <div class="level-tag">ğŸŸ¢ Level 1</div>
        <h2 class="level-title">The Meet Cute</h2>
        <div class="level-date">08 August 2022</div>
      </div>
      <div class="narrative-card">
        Two people attended a wedding in August 2022.<br>
        It was meant to celebrate someone else's love story.<br>
        <strong>Plot twist: it started theirs.</strong>
      </div>
      <div class="choices-label">What do you do?</div>
      <div class="choices-grid">
        <button class="choice-btn" onclick="makeChoice1('ignore')"><span class="choice-icon">ğŸ™„</span><span class="choice-text">Ignore</span><span class="choice-arrow">â€º</span></button>
        <button class="choice-btn" onclick="makeChoice1('polite')"><span class="choice-icon">ğŸ¤</span><span class="choice-text">Be polite</span><span class="choice-arrow">â€º</span></button>
        <button class="choice-btn" onclick="makeChoice1('talk')"><span class="choice-icon">ğŸ’¬</span><span class="choice-text">Actually talk</span><span class="choice-arrow">â€º</span></button>
      </div>
      <div class="outcome-box wrong" id="l1-wrong" style="display:none">
        <p>âš ï¸ Alternate universe unlocked: We remain strangers.</p>
        <div class="btn-row" style="margin-top:12px"><button class="btn-secondary" onclick="retryLevel1()">â†© Try Again</button></div>
      </div>
      <div class="outcome-box correct" id="l1-correct" style="display:none"><p>âœ… Good choice. The best one, actually.</p></div>
      <div class="points-popup" id="l1-points"><span>âœ¨</span> +10 Chemistry Points</div>
      <div class="reward-gallery" id="l1-gallery">
        <div class="photo-slot"><span class="photo-icon">ğŸ’¬</span>First Conversation</div>
        <div class="photo-slot"><span class="photo-icon">ğŸ“¸</span>The Wedding</div>
      </div>
      <div class="memory-section" id="l1-memory">
        <div class="memory-title">ğŸ’¬ Memory Unlocked</div>
        <p class="memory-text">"We talked. And then we didn't stop."</p>
      </div>
      <div class="btn-row"><button class="btn-primary hidden" id="l1-continue" onclick="goToLevel('level2')">Continue to Level 2 â€º</button></div>
      <div style="text-align:center;margin-top:24px">
        <span class="locked-hint" onclick="showEasterEgg()">ğŸ”’ Try to skip ahead?</span>
      </div>
    </div>
  </section>

  <!-- â•â•â• LEVEL 2 â€“ GERMANY MODE â•â•â• -->
  <section id="screen-level2" class="screen">
    <div class="level-wrapper">
      <div class="level-header">
        <button class="back-btn" onclick="goBack()">â€¹ Back</button>
        <div class="level-tag">ğŸŸ¢ Level 2</div>
        <h2 class="level-title">International Mode<br>Activated</h2>
        <div class="level-date">October 2022</div>
      </div>

      <!-- World Map: India â†’ Germany curved route -->
      <div class="world-map-container">
        <div class="dv-label">â³ Distance Activated</div>
        <div id="l2-map" style="height:350px;border-radius:12px;z-index:1"></div>
        <div class="distance-km">~7,800 km apart</div>
      </div>

      <div class="narrative-card">
        You moved to Germany.<br>
        Distance increased.<br>
        <strong>So did intention.</strong>
      </div>
      <div class="choices-label">How do you survive long distance?</div>
      <div class="choices-grid">
        <button class="choice-btn" onclick="makeChoice2('stop')"><span class="choice-icon">ğŸ“µ</span><span class="choice-text">Stop talking</span><span class="choice-arrow">â€º</span></button>
        <button class="choice-btn" onclick="makeChoice2('sometimes')"><span class="choice-icon">ğŸ“</span><span class="choice-text">Talk sometimes</span><span class="choice-arrow">â€º</span></button>
        <button class="choice-btn" onclick="makeChoice2('everyday')"><span class="choice-icon">ğŸŒ™</span><span class="choice-text">Talk every day</span><span class="choice-arrow">â€º</span></button>
      </div>
      <div class="outcome-box wrong" id="l2-wrong" style="display:none">
        <p>âŒ Wrong Choice.</p>
        <div class="btn-row" style="margin-top:12px"><button class="btn-secondary" onclick="retryLevel2()">â†© Try Again</button></div>
      </div>
      <div class="memory-section" id="l2-unlock">
        <div class="memory-title">ğŸ“ Memories Unlocked</div>
        <div class="memory-items">
          <div class="memory-item">First late-night call â€” when you realized time zones were actually kind of romantic</div>
          <div class="memory-item">First "I miss you" â€” said casually, meant deeply</div>
          <div class="memory-item">First silly argument â€” about something that didn't matter at all</div>
        </div>
      </div>
      <div class="reward-gallery" id="l2-gallery">
        <div class="photo-slot"><span class="photo-icon">ğŸŒ™</span>Late Night Call</div>
        <div class="photo-slot"><span class="photo-icon">ğŸ“±</span>Screenshot Memory</div>
      </div>
      <div class="btn-row"><button class="btn-primary hidden" id="l2-continue" onclick="goToLevel('level3')">Continue to Level 3 â€º</button></div>
    </div>
  </section>

  <!-- â•â•â• LEVEL 3 â€“ PROPOSAL â•â•â• -->
  <section id="screen-level3" class="screen">
    <div class="level-wrapper">
      <div class="level-header">
        <button class="back-btn" onclick="goBack()">â€¹ Back</button>
        <div class="level-tag">âš”ï¸ Level 3 â€“ Boss Battle</div>
        <h2 class="level-title">A Proposal Appears</h2>
        <div class="level-date">March 2023</div>
      </div>
      <div class="narrative-card">
        You flew thousands of kilometers for one question.<br>
        <strong>The kind that changes everything.</strong>
      </div>
      <div class="choices-label">My move:</div>
      <div class="choices-grid">
        <button class="choice-btn" onclick="makeChoice3('panic')"><span class="choice-icon">ğŸ˜±</span><span class="choice-text">Panic</span><span class="choice-arrow">â€º</span></button>
        <button class="choice-btn" onclick="makeChoice3('think')"><span class="choice-icon">ğŸ¤”</span><span class="choice-text">Keep Thinking</span><span class="choice-arrow">â€º</span></button>
        <button class="choice-btn" onclick="makeChoice3('yes')"><span class="choice-icon">ğŸ’</span><span class="choice-text">Say yes</span><span class="choice-arrow">â€º</span></button>
      </div>
      <div class="outcome-box wrong" id="l3-panic" style="display:none">
        <p>ğŸ˜… Understandable. But also â€” try again.</p>
        <div class="btn-row" style="margin-top:12px"><button class="btn-secondary" onclick="retryLevel3('panic')">â†© Try Again</button></div>
      </div>
      <div class="outcome-box wrong" id="l3-think" style="display:none">
        <p>ğŸ¤” Still Waiting. Give an answer!</p>
        <div class="btn-row" style="margin-top:12px"><button class="btn-secondary" onclick="retryLevel3('think')">â†© Try Again</button></div>
      </div>
      <div class="memory-section" id="l3-yes">
        <div class="memory-title">ğŸ’ The Answer</div>
        <p class="memory-text">"Yes. Obviously, yes."</p>
        <div class="photo-grid">
          <div class="photo-slot"><span class="photo-icon">ğŸ’</span>Proposal Moment</div>
          <div class="photo-slot"><span class="photo-icon">ğŸ“¸</span>Photo Memory</div>
          <div class="photo-slot"><span class="photo-icon">ğŸŒ¹</span>That Night</div>
        </div>
      </div>
      <div class="points-popup" id="l3-points"><span>ğŸ’</span> +50 Commitment Points</div>
      <div class="reward-gallery" id="l3-gallery">
        <div class="photo-slot"><span class="photo-icon">ğŸ’</span>The Ring</div>
        <div class="photo-slot"><span class="photo-icon">ğŸ¥°</span>That Smile</div>
        <div class="photo-slot"><span class="photo-icon">ğŸŒƒ</span>That Evening</div>
      </div>
      <div class="btn-row"><button class="btn-primary hidden" id="l3-continue" onclick="goToLevel('level4')">Continue to Level 4 â€º</button></div>
    </div>
  </section>

  <!-- â•â•â• LEVEL 4 â€“ PARENTS â•â•â• -->
  <section id="screen-level4" class="screen">
    <div class="level-wrapper">
      <div class="level-header">
        <button class="back-btn" onclick="goBack()">â€¹ Back</button>
        <div class="level-tag">ğŸ›¡ï¸ Level 4 â€“ Courage Quest</div>
        <h2 class="level-title">The Courage Quest</h2>
      </div>
      <div class="narrative-card">
        Love is easy.<br><strong>Conversations are harder.</strong><br>But some things are worth the nerves.
      </div>
      <div class="choices-label">Choose your next move:</div>
      <div class="parents-grid">
        <button class="parent-btn" id="pb-you" onclick="doParentAction('you')"><div class="pb-icon">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§</div><div class="pb-label">Talk to Your Parents</div><div class="pb-check">âœ…</div></button>
        <button class="parent-btn" id="pb-me" onclick="doParentAction('me')"><div class="pb-icon">ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦</div><div class="pb-label">Talk to My Parents</div><div class="pb-check">âœ…</div></button>
        <button class="parent-btn" id="pb-miracle" onclick="doMiracle()"><div class="pb-icon">ğŸ™</div><div class="pb-label">Hope for Miracle</div><div class="pb-check">âœ…</div></button>
      </div>
      <div class="status-change-banner" id="l4-success">ğŸ‰ Parents Approval: <strong>SUCCESS</strong></div>
      <div class="btn-row"><button class="btn-primary hidden" id="l4-continue" onclick="goToLevel('level5')">Continue to Level 5 â€º</button></div>
    </div>
  </section>

  <!-- â•â•â• LEVEL 5 â€“ ENGAGEMENT â•â•â• -->
  <section id="screen-level5" class="screen">
    <div class="level-wrapper">
      <div class="level-header">
        <button class="back-btn" onclick="goBack()">â€¹ Back</button>
        <div class="level-tag">ğŸ’ Level 5 â€“ Official Level-Up</div>
        <h2 class="level-title">Permanent Bond<br>Activated</h2>
        <div class="level-date">8 March 2024</div>
      </div>
      <div class="narrative-card">
        8 March 2024.<br>Not the beginning.<br>Not the end.<br><strong>Just the official level-up.</strong>
      </div>
      <div class="event-photo-section">
        <div class="eps-title">ğŸ“¸ Engagement Day</div>
        <div class="photo-grid">
          <div class="photo-slot"><span class="photo-icon">ğŸ’</span>The Ring</div>
          <div class="photo-slot"><span class="photo-icon">ğŸ“¸</span>With Family</div>
          <div class="photo-slot"><span class="photo-icon">âœ¨</span>That Moment</div>
          <div class="photo-slot"><span class="photo-icon">ğŸŒ¸</span>Celebration</div>
        </div>
      </div>
      <div class="memory-section visible">
        <div class="memory-title">ğŸ’› Status Update</div>
        <p class="memory-text">"It's official now. On paper, in front of everyone. But honestly â€” it had been official long before that."</p>
      </div>
      <div class="btn-row"><button class="btn-primary" onclick="goToLevel('level6')">Continue to Level 6 â€º</button></div>
    </div>
  </section>

  <!-- â•â•â• LEVEL 6 â€“ CO-OP MODE â•â•â• -->
  <section id="screen-level6" class="screen">
    <div class="level-wrapper">
      <div class="level-header">
        <button class="back-btn" onclick="goBack()">â€¹ Back</button>
        <div class="level-tag">ğŸ  Level 6 â€“ Co-Op Mode</div>
        <h2 class="level-title">Co-Op Mode IRL</h2>
        <div class="level-date">May 2024</div>
      </div>
      <div class="status-change-banner" id="l6-banner">ğŸ  Distance Meter: <strong>Offline</strong> Â· Co-Op Mode: <strong>ACTIVE</strong></div>
      <div class="narrative-card">No more time zones.<br>No more countdowns.<br><strong>Just shared space.</strong></div>
      <div class="choices-label">Explore your first co-op moments:</div>
      <div class="coop-grid">
        <button class="coop-btn" id="coop-grocery" onclick="doCoopAction('grocery')"><div class="cb-icon">ğŸ›’</div><div class="cb-label">First Grocery Raid</div></button>
        <button class="coop-btn" id="coop-cook" onclick="doCoopAction('cook')"><div class="cb-icon">ğŸ³</div><div class="cb-label">First Cooked Meal</div></button>
        <button class="coop-btn" id="coop-fight" onclick="doCoopAction('fight')"><div class="cb-icon">ğŸŒ©ï¸</div><div class="cb-label">First Real Fight</div></button>
        <button class="coop-btn" id="coop-sunday" onclick="doCoopAction('sunday')"><div class="cb-icon">â˜€ï¸</div><div class="cb-label">First Lazy Sunday</div></button>
      </div>
      <div class="btn-row"><button class="btn-primary hidden" id="l6-continue" onclick="goToLevel('bonus')">Continue to Bonus Quests â€º</button></div>
      <div style="text-align:center;margin-top:8px">
        <button class="btn-secondary" onclick="goToLevel('bonus')" style="opacity:0.6;font-size:0.8rem">Skip to Bonus Quests (unlock all memories first!)</button>
      </div>
    </div>
  </section>

  <!-- â•â•â• LEVEL 7 â€“ EUROPE MAP â•â•â• -->
  <section id="screen-level7" class="screen">
    <div class="level-wrapper">
      <div class="level-header">
        <button class="back-btn" onclick="goBack()">â€¹ Back</button>
        <div class="level-tag">ğŸ—ºï¸ Level 7 â€“ Expansion Pack</div>
        <h2 class="level-title">Europe<br>Expansion Pack</h2>
      </div>
      <div class="narrative-card">
        Two people. One continent.<br>Many trains and planes, a few Souveniers, and<br><strong>entirely too many good memories.</strong>
      </div>

      <div class="europe-map-container">
        <div class="map-label">ğŸŒ Click a country to unlock its memory</div>
        <div id="l7-map" style="height:450px;border-radius:12px;z-index:1"></div>
      </div>

      <div class="btn-row"><button class="btn-primary" onclick="initFinal()">Final Chapter â€º</button></div>
    </div>
  </section>

  <!-- â•â•â• BONUS QUESTS â•â•â• -->
  <section id="screen-bonus" class="screen">
    <div class="level-wrapper">
      <div class="level-header">
        <button class="back-btn" onclick="goBack()">â€¹ Back</button>
        <div class="level-tag">âš¡ Bonus Quests</div>
        <h2 class="level-title">Everyday<br>Bonus Quests</h2>
      </div>
      <div class="narrative-card">
        Not every chapter is a big moment.<br>Most of the story lives in the small ones.<br><strong>These are those.</strong>
      </div>
      <div class="choices-label">Select a quest to begin:</div>
      <div class="quest-grid">
        <button class="quest-card" onclick="openQuest('grocery')"><div class="qc-icon">ğŸ›’</div><div class="qc-name">Grocery Raid</div><div class="qc-diff">Difficulty: Medium</div><div class="qc-reward">Reward: Full fridge</div></button>
        <button class="quest-card" onclick="openQuest('cooking')"><div class="qc-icon">ğŸ³</div><div class="qc-name">Cooking Challenge</div><div class="qc-diff">Difficulty: Variable</div><div class="qc-reward">Reward: Edible food</div></button>
        <button class="quest-card" onclick="openQuest('pokemon')"><div class="qc-icon">ğŸ“±</div><div class="qc-name">PokÃ©mon Go Hunt</div><div class="qc-diff">Difficulty: Addictive</div><div class="qc-reward">Reward: Steps + bragging</div></button>
        <button class="quest-card" onclick="openQuest('study')"><div class="qc-icon">ğŸ“š</div><div class="qc-name">Study Mode</div><div class="qc-diff">Difficulty: High</div><div class="qc-reward">Reward: Actually learned stuff</div></button>
        <button class="quest-card" onclick="openQuest('cleaning')"><div class="qc-icon">ğŸ§¹</div><div class="qc-name">Cleaning Boss Fight</div><div class="qc-diff">Difficulty: High</div><div class="qc-reward">Reward: Peaceful Sunday</div></button>
      </div>
      <div class="btn-row"><button class="btn-primary" onclick="goToLevel('level7')">Continue to Level 7 â€º</button></div>
    </div>
  </section>

  <!-- â•â•â• FINAL SCREEN â•â•â• -->
  <section id="screen-final" class="screen">
    <div class="level-wrapper">
      <div class="level-header">
        <button class="back-btn" onclick="goBack()">â€¹ Back</button>
        <div class="level-tag">ğŸ† Endgame (For Now)</div>
        <h2 class="level-title">Game Status:<br>Ongoing</h2>
      </div>
      <div class="narrative-card">3.5 years since we pressed Start.<br>Still playing.<br><strong>Still choosing each other.</strong></div>

      <!-- Dynamic Score Summary -->
      <div class="score-summary" id="final-score-summary">
        <div class="score-total-card">
          <div class="score-total-label">Total Score</div>
          <div class="score-total-value" id="final-total-score">0 / 0</div>
          <div class="score-total-bar"><div class="score-total-fill" id="final-total-fill"></div></div>
        </div>
        <div class="score-breakdown" id="final-score-breakdown">
          <!-- Dynamically populated -->
        </div>
      </div>

      <div class="final-stats">
        <div class="stat-card"><div class="sc-value">3.5</div><div class="sc-label">Years Playing</div></div>
        <div class="stat-card"><div class="sc-value">8</div><div class="sc-label">Levels Cleared</div></div>
        <div class="stat-card"><div class="sc-value" id="final-countries-count">0</div><div class="sc-label">Countries Visited</div></div>
        <div class="stat-card"><div class="sc-value">âˆ</div><div class="sc-label">Memories Made</div></div>
      </div>
      <div class="final-progress-row">
        <div class="final-progress-track"><div class="final-progress-fill" id="final-progress-fill"></div></div>
        <div class="final-progress-label" id="final-progress-label">Relationship Progress: 100%</div>
      </div>

      <!-- Dynamic Badges -->
      <div class="memory-section visible" style="margin-top:16px">
        <div class="memory-title">ğŸ“› Badges &amp; Achievements <span id="final-badge-count" style="font-size:0.8rem;color:var(--text-muted)"></span></div>
        <div class="badge-grid" id="final-badges-list">
          <!-- Dynamically populated -->
        </div>
      </div>

      <!-- Level 9: Future Mode (Locked) -->
      <div class="btn-row" style="margin-top:24px">
        <button class="level9-locked-btn" onclick="showLevel9()">
          <span class="l9-lock">ğŸ”®</span>
          <span>Level 9: Future Mode</span>
          <span class="l9-badge">ğŸ”’ Locked</span>
        </button>
      </div>
      <div class="level9-reveal" id="level9-reveal" style="display:none">
        <div class="level9-text">
          <p class="l9-line">Still loadingâ€¦</p>
          <p class="l9-line">More cities.</p>
          <p class="l9-line">More fights.</p>
          <p class="l9-line">More growth.</p>
          <p class="l9-line">More ordinary days.</p>
          <p class="l9-line">More us.</p>
        </div>
      </div>

      <div style="text-align:center;margin-top:24px">
        <button class="btn-secondary" onclick="resetAndRestart()" style="font-size:0.82rem">â†© Play Again from Start</button>
      </div>
      <div class="landing-hearts" style="margin-top:36px" aria-hidden="true"><span>ğŸ’›</span><span>âœ¦</span><span>â™¡</span><span>âœ¦</span><span>ğŸ’›</span></div>
    </div>
  </section>

</main>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="script.js"></script>
</body>
</html>
